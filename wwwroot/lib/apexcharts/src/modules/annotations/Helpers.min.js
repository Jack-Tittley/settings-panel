/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/apexcharts@3.45.2/src/modules/annotations/Helpers.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import CoreUtils from"../CoreUtils";export default class Helpers{constructor(t){this.w=t.w,this.annoCtx=t}setOrientations(t,e=null){let a=this.w;if("vertical"===t.label.orientation){const i=null!==e?e:0;let l=a.globals.dom.baseEl.querySelector(`.apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='${i}']`);if(null!==l){const e=l.getBoundingClientRect();l.setAttribute("x",parseFloat(l.getAttribute("x"))-e.height+4),"top"===t.label.position?l.setAttribute("y",parseFloat(l.getAttribute("y"))+e.width):l.setAttribute("y",parseFloat(l.getAttribute("y"))-e.width);let a=this.annoCtx.graphics.rotateAroundCenter(l);const i=a.x,s=a.y;l.setAttribute("transform",`rotate(-90 ${i} ${s})`)}}}addBackgroundToAnno(t,e){const a=this.w;if(!t||void 0===e.label.text||void 0!==e.label.text&&!String(e.label.text).trim())return null;const i=a.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),l=t.getBoundingClientRect();let s=e.label.style.padding.left,o=e.label.style.padding.right,n=e.label.style.padding.top,r=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(n=e.label.style.padding.left,r=e.label.style.padding.right,s=e.label.style.padding.top,o=e.label.style.padding.bottom);const g=l.left-i.left-s,x=l.top-i.top-n,d=this.annoCtx.graphics.drawRect(g-a.globals.barPadForNumericAxis,x,l.width+s+o,l.height+n+r,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&d.node.classList.add(e.id),d}annotationsBackground(){const t=this.w,e=(e,a,i)=>{let l=t.globals.dom.baseEl.querySelector(`.apexcharts-${i}-annotations .apexcharts-${i}-annotation-label[rel='${a}']`);if(l){const t=l.parentNode,a=this.addBackgroundToAnno(l,e);a&&(t.insertBefore(a.node,l),e.label.mouseEnter&&a.node.addEventListener("mouseenter",e.label.mouseEnter.bind(this,e)),e.label.mouseLeave&&a.node.addEventListener("mouseleave",e.label.mouseLeave.bind(this,e)),e.label.click&&a.node.addEventListener("click",e.label.click.bind(this,e)))}};t.config.annotations.xaxis.map(((t,a)=>{e(t,a,"xaxis")})),t.config.annotations.yaxis.map(((t,a)=>{e(t,a,"yaxis")})),t.config.annotations.points.map(((t,a)=>{e(t,a,"point")}))}getY1Y2(t,e){let a,i="y1"===t?e.y:e.y2;const l=this.w;if(this.annoCtx.invertAxis){let t=l.globals.labels.indexOf(i);l.config.xaxis.convertedCatToNumeric&&(t=l.globals.categoryLabels.indexOf(i));const s=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(t+1)+")");s&&(a=parseFloat(s.getAttribute("y"))),void 0!==e.seriesIndex&&l.globals.barHeight&&(a=a-l.globals.barHeight/2*(l.globals.series.length-1)+l.globals.barHeight*e.seriesIndex)}else{let t;if(l.config.yaxis[e.yAxisIndex].logarithmic){i=new CoreUtils(this.annoCtx.ctx).getLogVal(i,e.yAxisIndex),t=i/l.globals.yLogRatio[e.yAxisIndex]}else t=(i-l.globals.minYArr[e.yAxisIndex])/(l.globals.yRange[e.yAxisIndex]/l.globals.gridHeight);a=l.globals.gridHeight-t,!e.marker||void 0!==e.y&&null!==e.y||(a=0),l.config.yaxis[e.yAxisIndex]&&l.config.yaxis[e.yAxisIndex].reversed&&(a=t)}return"string"==typeof i&&i.indexOf("px")>-1&&(a=parseFloat(i)),a}getX1X2(t,e){const a=this.w;let i=this.annoCtx.invertAxis?a.globals.minY:a.globals.minX,l=this.annoCtx.invertAxis?a.globals.maxY:a.globals.maxX;const s=this.annoCtx.invertAxis?a.globals.yRange[0]:a.globals.xRange;let o=(e.x-i)/(s/a.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(l-e.x)/(s/a.globals.gridWidth)),"category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||a.globals.dataFormatXNumeric||(o=this.getStringX(e.x));let n=(e.x2-i)/(s/a.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(n=(l-e.x2)/(s/a.globals.gridWidth)),"category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||a.globals.dataFormatXNumeric||(n=this.getStringX(e.x2)),void 0!==e.x&&null!==e.x||!e.marker||(o=a.globals.gridWidth),"x1"===t&&"string"==typeof e.x&&e.x.indexOf("px")>-1&&(o=parseFloat(e.x)),"x2"===t&&"string"==typeof e.x2&&e.x2.indexOf("px")>-1&&(n=parseFloat(e.x2)),void 0!==e.seriesIndex&&a.globals.barWidth&&!this.annoCtx.invertAxis&&(o=o-a.globals.barWidth/2*(a.globals.series.length-1)+a.globals.barWidth*e.seriesIndex),"x1"===t?o:n}getStringX(t){const e=this.w;let a=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);let i=e.globals.labels.indexOf(t);const l=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(i+1)+")");return l&&(a=parseFloat(l.getAttribute("x"))),a}}
//# sourceMappingURL=/sm/5ac4452bc28d6e278cf7583dcdc7a35579ecfdafb4a0ba0e0ac01515326a5296.map