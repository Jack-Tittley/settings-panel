/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/apexcharts@3.45.2/src/modules/Graphics.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Animations from"./Animations";import Filters from"./Filters";import Utils from"../utils/Utils";class Graphics{constructor(t){this.ctx=t,this.w=t.w}roundPathCorners(t,e){function a(t,e,a){var o=e.x-t.x,n=e.y-t.y,r=Math.sqrt(o*o+n*n);return i(t,e,Math.min(1,a/r))}function i(t,e,a){return{x:t.x+(e.x-t.x)*a,y:t.y+(e.y-t.y)*a}}function o(t,e){t.length>2&&(t[t.length-2]=e.x,t[t.length-1]=e.y)}function n(t){return{x:parseFloat(t[t.length-2]),y:parseFloat(t[t.length-1])}}t.indexOf("NaN")>-1&&(t="");var r=t.split(/[,\s]/).reduce((function(t,e){var a=e.match("([a-zA-Z])(.+)");return a?(t.push(a[1]),t.push(a[2])):t.push(e),t}),[]).reduce((function(t,e){return parseFloat(e)==e&&t.length?t[t.length-1].push(e):t.push([e]),t}),[]),l=[];if(r.length>1){var s=n(r[0]),d=null;"Z"==r[r.length-1][0]&&r[0].length>2&&(d=["L",s.x,s.y],r[r.length-1]=d),l.push(r[0]);for(var c=1;c<r.length;c++){var h=l[l.length-1],p=r[c],f=p==d?r[1]:r[c+1];if(f&&h&&h.length>2&&"L"==p[0]&&f.length>2&&"L"==f[0]){var g,u,x=n(h),y=n(p),b=n(f);g=a(y,x,e),u=a(y,b,e),o(p,g),p.origPoint=y,l.push(p);var w=i(g,y,.5),m=i(y,u,.5),v=["C",w.x,w.y,m.x,m.y,u.x,u.y];v.origPoint=y,l.push(v)}else l.push(p)}if(d){var P=n(l[l.length-1]);l.push(["Z"]),o(l[0],P)}}else l=r;return l.reduce((function(t,e){return t+e.join(" ")+" "}),"")}drawLine(t,e,a,i,o="#a8a8a8",n=0,r=null,l="butt"){return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:a,y2:i,stroke:o,"stroke-dasharray":n,"stroke-width":r,"stroke-linecap":l})}drawRect(t=0,e=0,a=0,i=0,o=0,n="#fefefe",r=1,l=null,s=null,d=0){let c=this.w.globals.dom.Paper.rect();return c.attr({x:t,y:e,width:a>0?a:0,height:i>0?i:0,rx:o,ry:o,opacity:r,"stroke-width":null!==l?l:0,stroke:null!==s?s:"none","stroke-dasharray":d}),c.node.setAttribute("fill",n),c}drawPolygon(t,e="#e1e1e1",a=1,i="none"){return this.w.globals.dom.Paper.polygon(t).attr({fill:i,stroke:e,"stroke-width":a})}drawCircle(t,e=null){t<0&&(t=0);const a=this.w.globals.dom.Paper.circle(2*t);return null!==e&&a.attr(e),a}drawPath({d:t="",stroke:e="#a8a8a8",strokeWidth:a=1,fill:i,fillOpacity:o=1,strokeOpacity:n=1,classes:r,strokeLinecap:l=null,strokeDashArray:s=0}){let d=this.w;return null===l&&(l=d.config.stroke.lineCap),(t.indexOf("undefined")>-1||t.indexOf("NaN")>-1)&&(t=`M 0 ${d.globals.gridHeight}`),d.globals.dom.Paper.path(t).attr({fill:i,"fill-opacity":o,stroke:e,"stroke-opacity":n,"stroke-linecap":l,"stroke-width":a,"stroke-dasharray":s,class:r})}group(t=null){const e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}move(t,e){return["M",t,e].join(" ")}line(t,e,a=null){let i=null;return null===a?i=[" L",t,e].join(" "):"H"===a?i=[" H",t].join(" "):"V"===a&&(i=[" V",e].join(" ")),i}curve(t,e,a,i,o,n){return["C",t,e,a,i,o,n].join(" ")}quadraticCurve(t,e,a,i){return["Q",t,e,a,i].join(" ")}arc(t,e,a,i,o,n,r,l=!1){let s="A";return l&&(s="a"),[s,t,e,a,i,o,n,r].join(" ")}renderPaths({j:t,realIndex:e,pathFrom:a,pathTo:i,stroke:o,strokeWidth:n,strokeLinecap:r,fill:l,animationDelay:s,initialSpeed:d,dataChangeSpeed:c,className:h,shouldClipToGrid:p=!0,bindEventsOnPaths:f=!0,drawShadow:g=!0}){let u=this.w;const x=new Filters(this.ctx),y=new Animations(this.ctx);let b,w=this.w.config.chart.animations.enabled,m=w&&this.w.config.chart.animations.dynamicAnimation.enabled,v=!!(w&&!u.globals.resized||m&&u.globals.dataChanged&&u.globals.shouldAnimate);v?b=a:(b=i,u.globals.animationEnded=!0);let P=u.config.stroke.dashArray,k=0;k=Array.isArray(P)?P[e]:u.config.stroke.dashArray;let A=this.drawPath({d:b,stroke:o,strokeWidth:n,fill:l,fillOpacity:1,classes:h,strokeLinecap:r,strokeDashArray:k});if(A.attr("index",e),p&&A.attr({"clip-path":`url(#gridRectMask${u.globals.cuid})`}),"none"!==u.config.states.normal.filter.type)x.getDefaultFilter(A,e);else if(u.config.chart.dropShadow.enabled&&g&&(!u.config.chart.dropShadow.enabledOnSeries||u.config.chart.dropShadow.enabledOnSeries&&-1!==u.config.chart.dropShadow.enabledOnSeries.indexOf(e))){const t=u.config.chart.dropShadow;x.dropShadow(A,t,e)}f&&(A.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,A)),A.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,A)),A.node.addEventListener("mousedown",this.pathMouseDown.bind(this,A))),A.attr({pathTo:i,pathFrom:a});const S={el:A,j:t,realIndex:e,pathFrom:a,pathTo:i,fill:l,strokeWidth:n,delay:s};return!w||u.globals.resized||u.globals.dataChanged?!u.globals.resized&&u.globals.dataChanged||y.showDelayedElements():y.animatePathsGradually({...S,speed:d}),u.globals.dataChanged&&m&&v&&y.animatePathsGradually({...S,speed:c}),A}drawPattern(t,e,a,i="#a8a8a8",o=0,n=1){return this.w.globals.dom.Paper.pattern(e,a,(n=>{"horizontalLines"===t?n.line(0,0,a,0).stroke({color:i,width:o+1}):"verticalLines"===t?n.line(0,0,0,e).stroke({color:i,width:o+1}):"slantedLines"===t?n.line(0,0,e,a).stroke({color:i,width:o}):"squares"===t?n.rect(e,a).fill("none").stroke({color:i,width:o}):"circles"===t&&n.circle(e).fill("none").stroke({color:i,width:o})}))}drawGradient(t,e,a,i,o,n=null,r=null,l=null,s=0){let d,c=this.w;e.length<9&&0===e.indexOf("#")&&(e=Utils.hexToRgba(e,i)),a.length<9&&0===a.indexOf("#")&&(a=Utils.hexToRgba(a,o));let h=0,p=1,f=1,g=null;null!==r&&(h=void 0!==r[0]?r[0]/100:0,p=void 0!==r[1]?r[1]/100:1,f=void 0!==r[2]?r[2]/100:1,g=void 0!==r[3]?r[3]/100:null);let u=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(d=null===l||0===l.length?c.globals.dom.Paper.gradient(u?"radial":"linear",(t=>{t.at(h,e,i),t.at(p,a,o),t.at(f,a,o),null!==g&&t.at(g,e,i)})):c.globals.dom.Paper.gradient(u?"radial":"linear",(t=>{(Array.isArray(l[s])?l[s]:l).forEach((e=>{t.at(e.offset/100,e.color,e.opacity)}))})),u){let t=c.globals.gridWidth/2,e=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?d.attr({gradientUnits:"userSpaceOnUse",cx:t,cy:e,r:n}):d.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?d.from(0,0).to(0,1):"diagonal"===t?d.from(0,0).to(1,1):"horizontal"===t?d.from(0,1).to(1,1):"diagonal2"===t&&d.from(1,0).to(0,1);return d}getTextBasedOnMaxWidth({text:t,maxWidth:e,fontSize:a,fontFamily:i}){const o=this.getTextRects(t,a,i),n=o.width/t.length,r=Math.floor(e/n);return e<o.width?t.slice(0,r-3)+"...":t}drawText({x:t,y:e,text:a,textAnchor:i,fontSize:o,fontFamily:n,fontWeight:r,foreColor:l,opacity:s,maxWidth:d,cssClass:c="",isPlainText:h=!0,dominantBaseline:p="auto"}){let f=this.w;void 0===a&&(a="");let g=a;i||(i="start"),l&&l.length||(l=f.config.chart.foreColor),n=n||f.config.chart.fontFamily,r=r||"regular";const u={maxWidth:d,fontSize:o=o||"11px",fontFamily:n};let x;return Array.isArray(a)?x=f.globals.dom.Paper.text((t=>{for(let e=0;e<a.length;e++)g=a[e],d&&(g=this.getTextBasedOnMaxWidth({text:a[e],...u})),0===e?t.tspan(g):t.tspan(g).newLine()})):(d&&(g=this.getTextBasedOnMaxWidth({text:a,...u})),x=h?f.globals.dom.Paper.plain(a):f.globals.dom.Paper.text((t=>t.tspan(g)))),x.attr({x:t,y:e,"text-anchor":i,"dominant-baseline":p,"font-size":o,"font-family":n,"font-weight":r,fill:l,class:"apexcharts-text "+c}),x.node.style.fontFamily=n,x.node.style.opacity=s,x}drawMarker(t,e,a){t=t||0;let i=a.pSize||0,o=null;if("square"===a.shape||"rect"===a.shape){let n=void 0===a.pRadius?i/2:a.pRadius;null!==e&&i||(i=0,n=0);let r=1.2*i+n,l=this.drawRect(r,r,r,r,n);l.attr({x:t-r/2,y:e-r/2,cx:t,cy:e,class:a.class?a.class:"",fill:a.pointFillColor,"fill-opacity":a.pointFillOpacity?a.pointFillOpacity:1,stroke:a.pointStrokeColor,"stroke-width":a.pointStrokeWidth?a.pointStrokeWidth:0,"stroke-opacity":a.pointStrokeOpacity?a.pointStrokeOpacity:1}),o=l}else"circle"!==a.shape&&a.shape||(Utils.isNumber(e)||(i=0,e=0),o=this.drawCircle(i,{cx:t,cy:e,class:a.class?a.class:"",stroke:a.pointStrokeColor,fill:a.pointFillColor,"fill-opacity":a.pointFillOpacity?a.pointFillOpacity:1,"stroke-width":a.pointStrokeWidth?a.pointStrokeWidth:0,"stroke-opacity":a.pointStrokeOpacity?a.pointStrokeOpacity:1}));return o}pathMouseEnter(t,e){let a=this.w;const i=new Filters(this.ctx),o=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10);if("function"==typeof a.config.chart.events.dataPointMouseEnter&&a.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:o,dataPointIndex:n,w:a}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:o,dataPointIndex:n,w:a}]),("none"===a.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==a.config.states.hover.filter.type&&!a.globals.isTouchDevice){let e=a.config.states.hover.filter;i.applyFilter(t,o,e.type,e.value)}}pathMouseLeave(t,e){let a=this.w;const i=new Filters(this.ctx),o=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10);"function"==typeof a.config.chart.events.dataPointMouseLeave&&a.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:o,dataPointIndex:n,w:a}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:o,dataPointIndex:n,w:a}]),"none"!==a.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==a.config.states.hover.filter.type&&i.getDefaultFilter(t,o)}pathMouseDown(t,e){let a=this.w;const i=new Filters(this.ctx),o=parseInt(t.node.getAttribute("index"),10),n=parseInt(t.node.getAttribute("j"),10);let r="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),a.globals.selectedDataPoints[o].indexOf(n)>-1){let t=a.globals.selectedDataPoints[o].indexOf(n);a.globals.selectedDataPoints[o].splice(t,1)}}else{if(!a.config.states.active.allowMultipleDataPointsSelection&&a.globals.selectedDataPoints.length>0){a.globals.selectedDataPoints=[];const t=a.globals.dom.Paper.select(".apexcharts-series path").members,e=a.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,n=t=>{Array.prototype.forEach.call(t,(t=>{t.node.setAttribute("selected","false"),i.getDefaultFilter(t,o)}))};n(t),n(e)}t.node.setAttribute("selected","true"),r="true",void 0===a.globals.selectedDataPoints[o]&&(a.globals.selectedDataPoints[o]=[]),a.globals.selectedDataPoints[o].push(n)}if("true"===r){let e=a.config.states.active.filter;if("none"!==e)i.applyFilter(t,o,e.type,e.value);else if("none"!==a.config.states.hover.filter&&!a.globals.isTouchDevice){var l=a.config.states.hover.filter;i.applyFilter(t,o,l.type,l.value)}}else if("none"!==a.config.states.active.filter.type)if("none"===a.config.states.hover.filter.type||a.globals.isTouchDevice)i.getDefaultFilter(t,o);else{l=a.config.states.hover.filter;i.applyFilter(t,o,l.type,l.value)}"function"==typeof a.config.chart.events.dataPointSelection&&a.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:a.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:n,w:a}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:a.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:n,w:a}])}rotateAroundCenter(t){let e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}static setAttrs(t,e){for(let a in e)e.hasOwnProperty(a)&&t.setAttribute(a,e[a])}getTextRects(t,e,a,i,o=!0){let n=this.w,r=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:a,foreColor:"#fff",opacity:0});i&&r.attr("transform",i),n.globals.dom.Paper.add(r);let l=r.bbox();return o||(l=r.node.getBoundingClientRect()),r.remove(),{width:l.width,height:l.height}}placeTextWithEllipsis(t,e,a){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=a/1.1)){for(let i=e.length-3;i>0;i-=3)if(t.getSubStringLength(0,i)<=a/1.1)return void(t.textContent=e.substring(0,i)+"...");t.textContent="."}}}export default Graphics;
//# sourceMappingURL=/sm/4b03a1cb19a4798c52b9b5d56bab66a4038d89802b8351da0aac6c216fcc0466.map