/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/apexcharts@3.45.2/src/charts/BoxCandleStick.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import CoreUtils from"../modules/CoreUtils";import Bar from"./Bar";import Fill from"../modules/Fill";import Graphics from"../modules/Graphics";import Utils from"../utils/Utils";class BoxCandleStick extends Bar{draw(i,e,s){let l=this.w,t=new Graphics(this.ctx),o=l.globals.comboCharts?e:l.config.chart.type,a=new Fill(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=l.config.plotOptions.bar.horizontal;const r=new CoreUtils(this.ctx,l);i=r.getLogSeries(i),this.series=i,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);let n=t.group({class:`apexcharts-${o}-series apexcharts-plot-series`});for(let e=0;e<i.length;e++){let o,r,h,c,p,d;this.isBoxPlot="boxPlot"===l.config.chart.type||"boxPlot"===l.config.series[e].type;let x=[],b=[],g=l.globals.comboCharts?s[e]:e,m=t.group({class:"apexcharts-series",seriesName:Utils.escapeString(l.globals.seriesNames[g]),rel:e+1,"data:realIndex":g});this.ctx.series.addCollapsedClassToSeries(m,g),i[e].length>0&&(this.visibleI=this.visibleI+1);let u=0,v=0;this.yRatio.length>1&&(this.yaxisIndex=g);let P=this.barHelpers.initialPositions();r=P.y,u=P.barHeight,c=P.yDivision,d=P.zeroW,o=P.x,v=P.barWidth,h=P.xDivision,p=P.zeroH,b.push(o+v/2);let C=t.group({class:"apexcharts-datalabels","data:realIndex":g});for(let s=0;s<l.globals.dataPoints;s++){const t=this.barHelpers.getStrokeWidth(e,s,g);let n=null;const P={indexes:{i:e,j:s,realIndex:g},x:o,y:r,strokeWidth:t,elSeries:m};n=this.isHorizontal?this.drawHorizontalBoxPaths({...P,yDivision:c,barHeight:u,zeroW:d}):this.drawVerticalBoxPaths({...P,xDivision:h,barWidth:v,zeroH:p}),r=n.y,o=n.x,s>0&&b.push(o+v/2),x.push(r),n.pathTo.forEach(((h,c)=>{let p=!this.isBoxPlot&&this.candlestickOptions.wick.useFillColor?n.color[c]:l.globals.stroke.colors[e],d=a.fillPath({seriesNumber:g,dataPointIndex:s,color:n.color[c],value:i[e][s]});this.renderSeries({realIndex:g,pathFill:d,lineFill:p,j:s,i:e,pathFrom:n.pathFrom,pathTo:h,strokeWidth:t,elSeries:m,x:o,y:r,series:i,barHeight:u,barWidth:v,elDataLabelsWrap:C,visibleSeries:this.visibleI,type:l.config.chart.type})}))}l.globals.seriesXvalues[g]=b,l.globals.seriesYvalues[g]=x,n.add(m)}return n}drawVerticalBoxPaths({indexes:i,x:e,y:s,xDivision:l,barWidth:t,zeroH:o,strokeWidth:a}){let r=this.w,n=new Graphics(this.ctx),h=i.i,c=i.j,p=!0,d=r.config.plotOptions.candlestick.colors.upward,x=r.config.plotOptions.candlestick.colors.downward,b="";this.isBoxPlot&&(b=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);const g=this.yRatio[this.yaxisIndex];let m=i.realIndex;const u=this.getOHLCValue(m,c);let v=o,P=o;u.o>u.c&&(p=!1);let C=Math.min(u.o,u.c),w=Math.max(u.o,u.c),y=u.m;r.globals.isXNumeric&&(e=(r.globals.seriesX[m][c]-r.globals.minX)/this.xRatio-t/2);let f=e+t*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(C=o,w=o):(C=o-C/g,w=o-w/g,v=o-u.h/g,P=o-u.l/g,y=o-u.m/g);let B=n.move(f,o),H=n.move(f+t/2,C);return r.globals.previousPaths.length>0&&(H=this.getPreviousPath(m,c,!0)),B=this.isBoxPlot?[n.move(f,C)+n.line(f+t/2,C)+n.line(f+t/2,v)+n.line(f+t/4,v)+n.line(f+t-t/4,v)+n.line(f+t/2,v)+n.line(f+t/2,C)+n.line(f+t,C)+n.line(f+t,y)+n.line(f,y)+n.line(f,C+a/2),n.move(f,y)+n.line(f+t,y)+n.line(f+t,w)+n.line(f+t/2,w)+n.line(f+t/2,P)+n.line(f+t-t/4,P)+n.line(f+t/4,P)+n.line(f+t/2,P)+n.line(f+t/2,w)+n.line(f,w)+n.line(f,y)+"z"]:[n.move(f,w)+n.line(f+t/2,w)+n.line(f+t/2,v)+n.line(f+t/2,w)+n.line(f+t,w)+n.line(f+t,C)+n.line(f+t/2,C)+n.line(f+t/2,P)+n.line(f+t/2,C)+n.line(f,C)+n.line(f,w-a/2)],H+=n.move(f,C),r.globals.isXNumeric||(e+=l),{pathTo:B,pathFrom:H,x:e,y:w,barXPosition:f,color:this.isBoxPlot?b:p?[d]:[x]}}drawHorizontalBoxPaths({indexes:i,x:e,y:s,yDivision:l,barHeight:t,zeroW:o,strokeWidth:a}){let r=this.w,n=new Graphics(this.ctx),h=i.i,c=i.j,p=this.boxOptions.colors.lower;this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);const d=this.invertedYRatio;let x=i.realIndex;const b=this.getOHLCValue(x,c);let g=o,m=o,u=Math.min(b.o,b.c),v=Math.max(b.o,b.c),P=b.m;r.globals.isXNumeric&&(s=(r.globals.seriesX[x][c]-r.globals.minX)/this.invertedXRatio-t/2);let C=s+t*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(u=o,v=o):(u=o+u/d,v=o+v/d,g=o+b.h/d,m=o+b.l/d,P=o+b.m/d);let w=n.move(o,C),y=n.move(u,C+t/2);return r.globals.previousPaths.length>0&&(y=this.getPreviousPath(x,c,!0)),w=[n.move(u,C)+n.line(u,C+t/2)+n.line(g,C+t/2)+n.line(g,C+t/2-t/4)+n.line(g,C+t/2+t/4)+n.line(g,C+t/2)+n.line(u,C+t/2)+n.line(u,C+t)+n.line(P,C+t)+n.line(P,C)+n.line(u+a/2,C),n.move(P,C)+n.line(P,C+t)+n.line(v,C+t)+n.line(v,C+t/2)+n.line(m,C+t/2)+n.line(m,C+t-t/4)+n.line(m,C+t/4)+n.line(m,C+t/2)+n.line(v,C+t/2)+n.line(v,C)+n.line(P,C)+"z"],y+=n.move(u,C),r.globals.isXNumeric||(s+=l),{pathTo:w,pathFrom:y,x:v,y:s,barYPosition:C,color:p}}getOHLCValue(i,e){const s=this.w;return{o:this.isBoxPlot?s.globals.seriesCandleH[i][e]:s.globals.seriesCandleO[i][e],h:this.isBoxPlot?s.globals.seriesCandleO[i][e]:s.globals.seriesCandleH[i][e],m:s.globals.seriesCandleM[i][e],l:this.isBoxPlot?s.globals.seriesCandleC[i][e]:s.globals.seriesCandleL[i][e],c:this.isBoxPlot?s.globals.seriesCandleL[i][e]:s.globals.seriesCandleC[i][e]}}}export default BoxCandleStick;
//# sourceMappingURL=/sm/e1e4b5fcb271655e0b9dc65eb0731888c3d50dc98b689aef280b219ac1bbd24a.map